<template>
  <div class="min-h-screen bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">
          ğŸ‰ SystÃ¨me de Toasts - DÃ©monstration
        </h1>
        <p class="text-gray-600">
          Testez tous les types de toasts et leurs diffÃ©rentes configurations
        </p>
      </div>

      <!-- Basic Toasts -->
      <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          Types de base
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <button
            @click="showSuccessToast"
            class="px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium"
          >
            âœ… Success
          </button>
          
          <button
            @click="showErrorToast"
            class="px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium"
          >
            âŒ Error
          </button>
          
          <button
            @click="showWarningToast"
            class="px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium"
          >
            âš ï¸ Warning
          </button>
          
          <button
            @click="showInfoToast"
            class="px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium"
          >
            â„¹ï¸ Info
          </button>
        </div>
      </div>

      <!-- Custom Duration -->
      <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          DurÃ©es personnalisÃ©es
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <button
            @click="showQuickToast"
            class="px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium"
          >
            âš¡ Rapide (2s)
          </button>
          
          <button
            @click="showNormalToast"
            class="px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium"
          >
            â±ï¸ Normal (5s)
          </button>
          
          <button
            @click="showLongToast"
            class="px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium"
          >
            â³ Long (10s)
          </button>
        </div>
      </div>

      <!-- Realistic Scenarios -->
      <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          ScÃ©narios rÃ©alistes
        </h2>
        
        <div class="space-y-3">
          <button
            @click="simulateLogin"
            class="w-full px-4 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-medium text-left flex items-center justify-between"
          >
            <span>ğŸ” Simuler une connexion</span>
            <span class="text-sm opacity-80">Success aprÃ¨s 1s</span>
          </button>
          
          <button
            @click="simulateTicketCreation"
            class="w-full px-4 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-medium text-left flex items-center justify-between"
          >
            <span>ğŸ« CrÃ©er un ticket</span>
            <span class="text-sm opacity-80">Success aprÃ¨s 1.5s</span>
          </button>
          
          <button
            @click="simulateError"
            class="w-full px-4 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-medium text-left flex items-center justify-between"
          >
            <span>ğŸ’¥ Simuler une erreur</span>
            <span class="text-sm opacity-80">Error aprÃ¨s 1s</span>
          </button>
          
          <button
            @click="simulateFormValidation"
            class="w-full px-4 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-medium text-left flex items-center justify-between"
          >
            <span>ğŸ“ Validation de formulaire</span>
            <span class="text-sm opacity-80">Multiple warnings</span>
          </button>
          
          <button
            @click="simulateBulkOperation"
            class="w-full px-4 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-medium text-left flex items-center justify-between"
          >
            <span>ğŸ“¦ OpÃ©ration en masse</span>
            <span class="text-sm opacity-80">Progress toasts</span>
          </button>
        </div>
      </div>

      <!-- Advanced Controls -->
      <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          ContrÃ´les avancÃ©s
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <button
            @click="showPersistentToast"
            class="px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"
          >
            ğŸ“Œ Toast persistant
          </button>
          
          <button
            @click="showMultipleToasts"
            class="px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium"
          >
            ğŸ“š Multiple toasts
          </button>
          
          <button
            @click="clearAllToasts"
            class="px-4 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium"
          >
            ğŸ—‘ï¸ Tout effacer
          </button>
        </div>
      </div>

      <!-- Message Templates -->
      <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          Messages courants
        </h2>
        
        <div class="space-y-2">
          <button
            @click="toast.success('Modification enregistrÃ©e avec succÃ¨s')"
            class="w-full px-4 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-sm"
          >
            ğŸ’¾ Modification enregistrÃ©e avec succÃ¨s
          </button>
          
          <button
            @click="toast.error('Une erreur est survenue. Veuillez rÃ©essayer.')"
            class="w-full px-4 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-sm"
          >
            âš ï¸ Une erreur est survenue. Veuillez rÃ©essayer.
          </button>
          
          <button
            @click="toast.warning('Cette action est irrÃ©versible')"
            class="w-full px-4 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-sm"
          >
            ğŸš¨ Cette action est irrÃ©versible
          </button>
          
          <button
            @click="toast.info('Votre session expire dans 5 minutes')"
            class="w-full px-4 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-sm"
          >
            â° Votre session expire dans 5 minutes
          </button>
          
          <button
            @click="toast.success('Fichier uploadÃ© avec succÃ¨s (2.4 MB)')"
            class="w-full px-4 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-sm"
          >
            ğŸ“¤ Fichier uploadÃ© avec succÃ¨s (2.4 MB)
          </button>
          
          <button
            @click="toast.error('Connexion perdue. Reconnexion en cours...')"
            class="w-full px-4 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-sm"
          >
            ğŸ”Œ Connexion perdue. Reconnexion en cours...
          </button>
        </div>
      </div>

      <!-- Stats -->
      <div class="bg-white rounded-lg shadow-sm p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          Statistiques
        </h2>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="text-center p-4 bg-green-50 rounded-lg">
            <div class="text-2xl font-bold text-green-600">{{ stats.success }}</div>
            <div class="text-sm text-green-700">Success</div>
          </div>
          
          <div class="text-center p-4 bg-red-50 rounded-lg">
            <div class="text-2xl font-bold text-red-600">{{ stats.error }}</div>
            <div class="text-sm text-red-700">Error</div>
          </div>
          
          <div class="text-center p-4 bg-orange-50 rounded-lg">
            <div class="text-2xl font-bold text-orange-600">{{ stats.warning }}</div>
            <div class="text-sm text-orange-700">Warning</div>
          </div>
          
          <div class="text-center p-4 bg-blue-50 rounded-lg">
            <div class="text-2xl font-bold text-blue-600">{{ stats.info }}</div>
            <div class="text-sm text-blue-700">Info</div>
          </div>
        </div>
        
        <div class="mt-4 text-center text-sm text-gray-600">
          Total de toasts affichÃ©s : {{ stats.total }}
        </div>
      </div>

      <!-- Code Examples -->
      <div class="bg-white rounded-lg shadow-sm p-6 mt-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">
          Exemples de code
        </h2>
        
        <div class="space-y-4">
          <div>
            <div class="text-sm font-medium text-gray-700 mb-2">Success Toast</div>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>toast.success('OpÃ©ration rÃ©ussie !')</code></pre>
          </div>
          
          <div>
            <div class="text-sm font-medium text-gray-700 mb-2">Error Toast</div>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>toast.error('Une erreur est survenue')</code></pre>
          </div>
          
          <div>
            <div class="text-sm font-medium text-gray-700 mb-2">Toast avec durÃ©e personnalisÃ©e</div>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>toast.success('Message', 3000) // 3 secondes</code></pre>
          </div>
          
          <div>
            <div class="text-sm font-medium text-gray-700 mb-2">Toast persistant (manuel)</div>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto"><code>const id = toast.info('Loading...', 0)
// Plus tard...
toast.removeToast(id)</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue'
import { useToast } from '@/composables/useToast'

const toast = useToast()

// Statistics
const stats = reactive({
  success: 0,
  error: 0,
  warning: 0,
  info: 0,
  total: 0
})

const incrementStat = (type: 'success' | 'error' | 'warning' | 'info') => {
  stats[type]++
  stats.total++
}

// Basic Toasts
const showSuccessToast = () => {
  toast.success('OpÃ©ration rÃ©ussie ! âœ¨')
  incrementStat('success')
}

const showErrorToast = () => {
  toast.error('Une erreur est survenue ğŸ˜')
  incrementStat('error')
}

const showWarningToast = () => {
  toast.warning('Attention Ã  cette action âš ï¸')
  incrementStat('warning')
}

const showInfoToast = () => {
  toast.info('Nouvelle information disponible ğŸ“¢')
  incrementStat('info')
}

// Custom Duration
const showQuickToast = () => {
  toast.success('Toast rapide (2 secondes)', 2000)
  incrementStat('success')
}

const showNormalToast = () => {
  toast.info('Toast normal (5 secondes)', 5000)
  incrementStat('info')
}

const showLongToast = () => {
  toast.warning('Toast long (10 secondes)', 10000)
  incrementStat('warning')
}

// Realistic Scenarios
const simulateLogin = () => {
  toast.info('Connexion en cours...')
  incrementStat('info')
  
  setTimeout(() => {
    toast.success('Bienvenue Jean Dupont ! ğŸ‘‹')
    incrementStat('success')
  }, 1000)
}

const simulateTicketCreation = () => {
  toast.info('CrÃ©ation du ticket...')
  incrementStat('info')
  
  setTimeout(() => {
    toast.success('Ticket PROJ-042 crÃ©Ã© avec succÃ¨s ğŸ«')
    incrementStat('success')
  }, 1500)
}

const simulateError = () => {
  toast.info('Traitement en cours...')
  incrementStat('info')
  
  setTimeout(() => {
    toast.error('Ã‰chec de la connexion au serveur ğŸ”Œ')
    incrementStat('error')
  }, 1000)
}

const simulateFormValidation = () => {
  toast.warning('Le titre doit contenir au moins 3 caractÃ¨res')
  incrementStat('warning')
  
  setTimeout(() => {
    toast.warning('Veuillez sÃ©lectionner un type de ticket')
    incrementStat('warning')
  }, 500)
  
  setTimeout(() => {
    toast.warning('Les points de difficultÃ© sont obligatoires')
    incrementStat('warning')
  }, 1000)
}

const simulateBulkOperation = async () => {
  const items = ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5']
  
  toast.info(`Traitement de ${items.length} Ã©lÃ©ments...`, 0)
  incrementStat('info')
  
  for (let i = 0; i < items.length; i++) {
    await new Promise(resolve => setTimeout(resolve, 800))
    toast.info(`${items[i]} traitÃ© (${i + 1}/${items.length})`, 2000)
    incrementStat('info')
  }
  
  setTimeout(() => {
    toast.success(`âœ… ${items.length} Ã©lÃ©ments traitÃ©s avec succÃ¨s !`)
    incrementStat('success')
  }, 800)
}

// Advanced Controls
const showPersistentToast = () => {
  const id = toast.info('â³ Ce toast ne disparaÃ®tra pas automatiquement. Cliquez sur X pour le fermer.', 0)
  incrementStat('info')
  
  // Optionnel : le fermer aprÃ¨s 30 secondes
  setTimeout(() => {
    toast.removeToast(id)
  }, 30000)
}

const showMultipleToasts = () => {
  toast.success('Premier toast')
  incrementStat('success')
  
  setTimeout(() => {
    toast.info('DeuxiÃ¨me toast')
    incrementStat('info')
  }, 300)
  
  setTimeout(() => {
    toast.warning('TroisiÃ¨me toast')
    incrementStat('warning')
  }, 600)
  
  setTimeout(() => {
    toast.error('QuatriÃ¨me toast')
    incrementStat('error')
  }, 900)
}

const clearAllToasts = () => {
  toast.clear()
  toast.info('Tous les toasts ont Ã©tÃ© effacÃ©s ğŸ—‘ï¸')
  incrementStat('info')
}
</script>

<style scoped>
pre {
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

code {
  font-size: 0.875rem;
  line-height: 1.5;
}
</style>